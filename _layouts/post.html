---
layout: default
refactor: true
panel_includes:
  - toc
tail_includes:
  - related-posts
  - post-nav
  - comments
---

{% include lang.html %}

<div class="row">
  <div class="col-12 col-lg-11 col-xl-9">
    <article>
      <header>
        <h1 data-toc-skip>{{ page.title }}</h1>
        
        <div class="post-meta text-muted">
          <!-- Post date -->
          <span>
            {{ site.data.locales[lang].post.posted }}
            {% include datetime.html date=page.date tooltip=true lang=lang %}
          </span>

          <!-- Post categories -->
          {% if page.categories.size > 0 %}
            <div class="mt-3 mb-3">
              {% for category in page.categories %}
                {% assign category_page = site.pages | where: "category", category | first %}
                {% if category_page and category_page.title %}
                  <a href="{{ category_page.url | relative_url }}" class="text-decoration-none">
                    <i class="far fa-folder fa-fw"></i>{{ category_page.title }}
                  </a>
                {% else %}
                  <span class="text-muted">
                    <i class="far fa-folder fa-fw"></i>{{ category }}
                  </span>
                {% endif %}
                {%- unless forloop.last -%},{%- endunless -%}
              {% endfor %}
            </div>
          {% endif %}

          <!-- Post tags -->
          {% if page.tags.size > 0 %}
            <div class="mb-3">
              {% for tag in page.tags %}
                <a href="{{ site.baseurl }}/tags/{{ tag | downcase | url_encode }}/" 
                   class="text-decoration-none">
                  <i class="fas fa-tag fa-fw"></i>{{ tag }}
                </a>
                {%- unless forloop.last -%},{%- endunless -%}
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </header>

      <div class="content">
        {{ content }}
      </div>

      <div class="post-tail-wrapper text-muted">
        <!-- Post updated date -->
        {% if page.last_modified_at %}
          <div class="post-meta mb-3">
            <i class="far fa-calendar-alt fa-fw"></i>
            {{ site.data.locales[lang].post.updated }}
            {% include datetime.html date=page.last_modified_at tooltip=true lang=lang %}
          </div>
        {% endif %}

        <!-- Post sharing -->
        {% if site.data.share.enable %}
          {% include post-sharing.html lang=lang %}
        {% endif %}

        <!-- Post navigation -->
        {% if site.data.locales[lang].post.button %}
          {% include post-nav.html lang=lang %}
        {% endif %}

        <!-- Comments section - ВАЖНО: внутри контентной колонки -->
        {% if site.comments.active and page.comments %}
          <div class="post-comments mt-4">
            {% case site.comments.provider %}
              {% when 'vk' %}
                {% include comments/vk.html %}
              {% when 'disqus' %}
                {% include comments/disqus.html %}
              {% when 'utterances' %}
                {% include comments/utterances.html %}
              {% when 'giscus' %}
                {% include comments/giscus.html %}
            {% endcase %}
          </div>
        {% endif %}
      </div>
    </article>
  </div>

  <!-- TOC Sidebar -->
  <div class="col-xl-3 toc-wrapper d-none d-xl-block">
    {% if page.toc %}
      {% include toc.html lang=lang %}
    {% endif %}
  </div>
</div>
